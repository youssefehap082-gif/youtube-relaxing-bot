name: Test YouTube Bot Setup

on:
  workflow_dispatch:

jobs:
  test_job:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repo
        uses: actions/checkout@v4

      - name: Print working directory and list files
        run: |
          echo "Current path:"
          pwd
          echo "Files in repo:"
          ls -R

      - name: Check secrets availability
        run: |
          echo "Checking secrets..."
          if [ -z "${{ secrets.PEXELS_API_KEY }}" ]; then echo "❌ Missing: PEXELS_API_KEY"; else echo "✅ Found: PEXELS_API_KEY"; fi
          if [ -z "${{ secrets.PIXABAY_API_KEY }}" ]; then echo "❌ Missing: PIXABAY_API_KEY"; else echo "✅ Found: PIXABAY_API_KEY"; fi
          if [ -z "${{ secrets.COVERR_API_KEY }}" ]; then echo "❌ Missing: COVERR_API_KEY"; else echo "✅ Found: COVERR_API_KEY"; fi
          if [ -z "${{ secrets.GOOGLE_CLIENT_ID }}" ]; then echo "❌ Missing: GOOGLE_CLIENT_ID"; else echo "✅ Found: GOOGLE_CLIENT_ID"; fi
          if [ -z "${{ secrets.GOOGLE_CLIENT_SECRET }}" ]; then echo "❌ Missing: GOOGLE_CLIENT_SECRET"; else echo "✅ Found: GOOGLE_CLIENT_SECRET"; fi
          if [ -z "${{ secrets.YT_REFRESH_TOKEN }}" ]; then echo "❌ Missing: YT_REFRESH_TOKEN"; else echo "✅ Found: YT_REFRESH_TOKEN"; fi
          if [ -z "${{ secrets.MIXKIT_FALLBACK_AUDIO }}" ]; then echo "⚠️ Optional missing: MIXKIT_FALLBACK_AUDIO"; else echo "✅ Found: MIXKIT_FALLBACK_AUDIO"; fi

      - name: Finish test
        run: echo "✅ Workflow ran successfully!"
